<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
			integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn"
			crossorigin="anonymous"
		/>
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
		<style>
			body {
				margin: 0;
				padding: 0;
				background-image: url(/img/2.png);
				display: flex;
				justify-content: center;
			}

     		form {
				transform: translateY(0px);
				filter: drop-shadow(1px 2px 4px hsl(0deg, 0%, 0%, 0.2));
			}
			form:focus-within {
				transform: translateY(-4px);
				filter: drop-shadow(2px 4px 16px hsl(0deg, 0%, 0%, 0.2));
			}
			#btn {
				background-color: #324676;
				color: white;
			}

</style>
		<title>Форма регистрации</title>
	</head>
	<body>
			<div class="container mt-5">
			<h3 class="text-center">Регистрация в розыгрыше</h3>

			<div class="col-md-5 mx-auto mt-2">
				<form onsubmit="sendForm(this); return false;">
					<div class="input-group mb-3">
						<div class="input-group-prepend">
							<div class="input-group-text">
								<i class="bi bi-person-fill"></i>
							</div>
						</div>
						<input type="text" class="form-control" placeholder="Имя" required name="name" />
					</div>
					<div class="input-group mb-3">
						<div class="input-group-prepend">
							<div class="input-group-text">
								<i class="bi bi-person-fill"></i>
							</div>
						</div>
						<input
							type="text"
							class="form-control"
							placeholder="Фамилия"
							required
							name="lastname"
						/>
					</div>
					<div class="input-group mb-3">
						<div class="input-group-prepend">
							<div class="input-group-text">
								<i class="bi bi-envelope-fill"></i>
							</div>
						</div>
						<input type="email" class="form-control" placeholder="E-mail" required name="email" />
					</div>
					<p id="info" style="color: black"></p>
					<div class="input-group mb-3">
						<div class="input-group-prepend">
							<div class="input-group-text">
								<i class="bi bi-telephone-fill"></i>
							</div>
						</div>
						<input
							type="phone"
							class="form-control"
							placeholder="Телефон"
							required
							name="phone"
						/>
					</div>

					<div class="form-check mb-3">
						<input class="form-check-input" type="checkbox" required />
						<label class="form-check-label" for="autoSizingCheck">
							Даю согласие на обработку персональных данных
						</label>
					</div>
					<input type="submit" class="form-control" data-toggle="modal" id="btn" data-target="#exampleModal" value="Зарегистрироваться" />
		  			</form>
			</div>
		</div>

  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog">
	  <div class="modal-content">
		<div class="modal-header">
		  <h5 class="modal-title" id="exampleModalLabel">Вы успешно зарегистрированы!</h5>
		  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		  </button>
		</div>
		<div class="modal-body">
		На Вашу электронную почту отправлено письмо с уникальным номером для участия в розыгрыше. <br> Вы можете перейти на страницу розыгрыша нажав кнопку ниже или по ссылке в письме. Удачи!
		</div>
		<div class="modal-footer">
		  <button onclick="document.location='/give.html'" type="button" class="btn btn-primary">Проверить свою удачу!</button>
		  <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
		</div>
	  </div>
	</div>
  </div>
  

		<script>
			async function sendForm(form) {
				let response = await fetch("/registr_obr.php", {
					method: "POST",
					body: new FormData(form),
				});
				let result = await response.text();
				if (result == "ok") {
					$('#myModal').modal(show)
				} else {
					info.innerText = "Такой пользователь существует!";
				}
			}
			
		</script>

		<script
			src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
			integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
			crossorigin="anonymous"
		></script>
	</body>
</html>